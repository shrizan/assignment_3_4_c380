<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Currency Converter</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="icon" type="image/x-icon" href="./exchange.png">

  <!-- ROBOTO font added from google font -->
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <section>
    <div class="outer--div">

      <!-- info section  -->
      <div class="info-div">
        <h1>US Dollar to Canadian Dollar</h1>
        <p>Convert <strong>USD</strong> to <strong>CAD</strong> at the real exchange rate</p>
      </div>
      <!-- end of info section -->

      <!-- wrapping usd currecny section, exchange icon and cad currency -->
      <div class="currency--outer">

        <!-- first currency pary -->
        <div>
          <div class="currency--wrapper">
            <div class="currency__input">
              <label for="currencyUSD">Amount</label>
              <input id="currencyUSD" type="number" />
            </div>
            <div class="currency__label">
              ðŸ‡ºðŸ‡² &nbsp;USD
            </div>
          </div>

          <!-- error field if error exist -->
          <p class="error" id="usdError"></p>
        </div>
        <!-- end of first currency part -->

        <!-- start of exchange icon -->
        <div class="exchange--icon-wrapper">
          <img src="exchange.png" alt="exchange icon" class="exchange__icon">
        </div>
        <!-- end of exchange icon -->

        <!-- second currency part -->
        <div class="currency--wrapper">
          <div class="currency__input">
            <label>Convert To</label>
            <input id="currencyCAD" readonly />
          </div>
          <div class="currency__label">
            ðŸ‡¨ðŸ‡¦ &nbsp; CAD
          </div>
        </div>
        <!-- end of second currency part -->
      </div>
      <!-- end of currency wrapper -->

    </div>
    <!-- end of main section wrapper -->

    <!-- CONVERT BUTTON -->
    <div class="convert--wrapper">
      <div></div>
      <div></div>
      <div style="text-align: end;"><button class="convert__button" id="convertButton">Convert</button></div>
    </div>

  </section>


  <script>

    // css variable for javascript
    const colorBorder = "#a49f9f";
    const errorColor = "red";

    // message section
    const requiredFieldMsg = "This field is required !!!"
    const provideUSDValueMsg = "Please provide USD amount to convert!!!";

    // getting element of DOM for manipulation and processing
    const currencyUSD = document.getElementById("currencyUSD");
    const currencyCAD = document.getElementById("currencyCAD");
    const usdError = document.getElementById("usdError");
    const convertButton = document.getElementById("convertButton");

    // when usd change by user logic is implemented here
    const onUSDChange = function () {
      currencyCAD.value = null;
      if (!event.target.value || event.target.value === "") {
        currencyUSD.style.borderColor = errorColor;
        usdError.innerHTML = requiredFieldMsg;
      }
      else {

        currencyUSD.style.borderColor = colorBorder;
        usdError.innerHTML = '';
      }
    }

    // adding change, keyup and focus events to usd input field 
    const addEventToUSD = function () {
      currencyUSD.addEventListener("change", onUSDChange, false);
      currencyUSD.addEventListener("keyup", onUSDChange, false);
      currencyUSD.addEventListener("focus", onUSDChange, false);
    }

    // adding event listener for convert click button and implementing currency conversion logic
    const onConvertButtonClick = function () {
      convertButton.addEventListener("click", function () {
        if (currencyUSD.value) {
          currencyCAD.value = (parseFloat(currencyUSD.value) * 1.33).toFixed(3);
        }
        else {
          alert(provideUSDValueMsg)
        }
      });
    }

    // making sure other logic and event listener is added after dom is loaded
    document.addEventListener("DOMContentLoaded", function () {
      addEventToUSD();
      onConvertButtonClick();
    });
  </script>
</body>

</html>